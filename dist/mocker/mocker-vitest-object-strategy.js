import { vi } from 'vitest';
import { VitestSpyFunctionStrategy } from '#src/vitest-spy/vitest-spy-function-strategy';
export class MockerVitestObjectStrategy {
    _contract;
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    _spies = [];
    constructor(_contract) {
        this._contract = _contract;
    }
    mockRestore() {
        this._spies.forEach((spy) => {
            spy.mockRestore();
        });
    }
    contractSpy() {
        return this._mockObject();
    }
    _mockObject() {
        const { module, subjectName } = this._contract;
        return Object.fromEntries(Object.entries(this._contract.fns).map(([fnName, ctFunc]) => {
            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions
            const vitestSpyFunction = new VitestSpyFunctionStrategy({ name: `${subjectName}.${fnName}`, terms: ctFunc.terms });
            const spy = vi.spyOn(module[subjectName], fnName).mockImplementation(vitestSpyFunction.mockImplementationFactory());
            this._spies.push(spy);
            return [fnName, spy];
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja2VyLXZpdGVzdC1vYmplY3Qtc3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9ja2VyL21vY2tlci12aXRlc3Qtb2JqZWN0LXN0cmF0ZWd5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBcUIsRUFBRSxFQUFFLE1BQU0sUUFBUSxDQUFBO0FBSTlDLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDhDQUE4QyxDQUFBO0FBS3hGLE1BQU0sT0FBTywwQkFBMEI7SUFJaEI7SUFIdEIsOERBQThEO0lBQ3BELE1BQU0sR0FBd0IsRUFBRSxDQUFBO0lBRTFDLFlBQXNCLFNBQXNCO1FBQXRCLGNBQVMsR0FBVCxTQUFTLENBQWE7SUFBRyxDQUFDO0lBRWhELFdBQVc7UUFDVixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQzNCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUNsQixDQUFDLENBQUMsQ0FBQTtJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1YsT0FBTyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7SUFDMUIsQ0FBQztJQUVTLFdBQVc7UUFDcEIsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFBO1FBRTlDLE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FDeEIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDM0QsNEVBQTRFO1lBQzVFLE1BQU0saUJBQWlCLEdBQUcsSUFBSSx5QkFBeUIsQ0FBQyxFQUFFLElBQUksRUFBRSxHQUFHLFdBQVcsSUFBSSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUE7WUFDbkgsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsa0JBQWtCLENBQUMsaUJBQWlCLENBQUMseUJBQXlCLEVBQUUsQ0FBQyxDQUFBO1lBQ25ILElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBRXJCLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDckIsQ0FBQyxDQUFDLENBQ0YsQ0FBQTtJQUNGLENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTW9ja0luc3RhbmNlLCB2aSB9IGZyb20gJ3ZpdGVzdCdcblxuaW1wb3J0IHsgdHlwZSBNb2NrZXJTdHJhdGVneSB9IGZyb20gJyNzcmMvbW9ja2VyL21vY2tlci1zdHJhdGVneSdcbmltcG9ydCB7IHR5cGUgQW55Q29udHJhY3QgfSBmcm9tICcjc3JjL3R5cGVzL2luZGV4J1xuaW1wb3J0IHsgVml0ZXN0U3B5RnVuY3Rpb25TdHJhdGVneSB9IGZyb20gJyNzcmMvdml0ZXN0LXNweS92aXRlc3Qtc3B5LWZ1bmN0aW9uLXN0cmF0ZWd5J1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IHR5cGUgTW9ja2VyVml0ZXN0T2JqZWN0UmVzdWx0ID0gUmVjb3JkPHN0cmluZywgTW9ja0luc3RhbmNlPGFueT4+XG5cbmV4cG9ydCBjbGFzcyBNb2NrZXJWaXRlc3RPYmplY3RTdHJhdGVneSBpbXBsZW1lbnRzIE1vY2tlclN0cmF0ZWd5PE1vY2tlclZpdGVzdE9iamVjdFJlc3VsdD4ge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXHRwcm90ZWN0ZWQgX3NwaWVzOiBNb2NrSW5zdGFuY2U8YW55PltdID0gW11cblxuXHRjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX2NvbnRyYWN0OiBBbnlDb250cmFjdCkge31cblxuXHRtb2NrUmVzdG9yZSgpOiB2b2lkIHtcblx0XHR0aGlzLl9zcGllcy5mb3JFYWNoKChzcHkpID0+IHtcblx0XHRcdHNweS5tb2NrUmVzdG9yZSgpXG5cdFx0fSlcblx0fVxuXG5cdGNvbnRyYWN0U3B5KCk6IE1vY2tlclZpdGVzdE9iamVjdFJlc3VsdCB7XG5cdFx0cmV0dXJuIHRoaXMuX21vY2tPYmplY3QoKVxuXHR9XG5cblx0cHJvdGVjdGVkIF9tb2NrT2JqZWN0KCk6IE1vY2tlclZpdGVzdE9iamVjdFJlc3VsdCB7XG5cdFx0Y29uc3QgeyBtb2R1bGUsIHN1YmplY3ROYW1lIH0gPSB0aGlzLl9jb250cmFjdFxuXG5cdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcblx0XHRcdE9iamVjdC5lbnRyaWVzKHRoaXMuX2NvbnRyYWN0LmZucykubWFwKChbZm5OYW1lLCBjdEZ1bmNdKSA9PiB7XG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVzdHJpY3QtdGVtcGxhdGUtZXhwcmVzc2lvbnNcblx0XHRcdFx0Y29uc3Qgdml0ZXN0U3B5RnVuY3Rpb24gPSBuZXcgVml0ZXN0U3B5RnVuY3Rpb25TdHJhdGVneSh7IG5hbWU6IGAke3N1YmplY3ROYW1lfS4ke2ZuTmFtZX1gLCB0ZXJtczogY3RGdW5jIS50ZXJtcyB9KVxuXHRcdFx0XHRjb25zdCBzcHkgPSB2aS5zcHlPbihtb2R1bGVbc3ViamVjdE5hbWVdLCBmbk5hbWUpLm1vY2tJbXBsZW1lbnRhdGlvbih2aXRlc3RTcHlGdW5jdGlvbi5tb2NrSW1wbGVtZW50YXRpb25GYWN0b3J5KCkpXG5cdFx0XHRcdHRoaXMuX3NwaWVzLnB1c2goc3B5KVxuXG5cdFx0XHRcdHJldHVybiBbZm5OYW1lLCBzcHldXG5cdFx0XHR9KVxuXHRcdClcblx0fVxufVxuIl19