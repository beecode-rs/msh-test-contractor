import { vi } from 'vitest';
import { VitestSpyFunctionStrategy } from '#src/vitest-spy/vitest-spy-function-strategy';
export class MockerVitestObjectStrategy {
    _contract;
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    _spies = [];
    constructor(_contract) {
        this._contract = _contract;
    }
    mockRestore() {
        this._spies.forEach((spy) => spy.mockRestore());
    }
    contractSpy() {
        return this._mockObject();
    }
    _mockObject() {
        const { module, subjectName } = this._contract;
        return Object.fromEntries(Object.entries(this._contract.fns).map(([fnName, ctFunc]) => {
            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions
            const vitestSpyFunction = new VitestSpyFunctionStrategy({ name: `${subjectName}.${fnName}`, terms: ctFunc.terms });
            const spy = vi.spyOn(module[subjectName], fnName).mockImplementation(vitestSpyFunction.mockImplementationFactory());
            this._spies.push(spy);
            return [fnName, spy];
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja2VyLXZpdGVzdC1vYmplY3Qtc3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9ja2VyL21vY2tlci12aXRlc3Qtb2JqZWN0LXN0cmF0ZWd5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxRQUFRLENBQUE7QUFFM0IsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sOENBQThDLENBQUE7QUFPeEYsTUFBTSxPQUFPLDBCQUEwQjtJQUloQjtJQUh0Qiw4REFBOEQ7SUFDcEQsTUFBTSxHQUFvQixFQUFFLENBQUE7SUFFdEMsWUFBc0IsU0FBc0I7UUFBdEIsY0FBUyxHQUFULFNBQVMsQ0FBYTtJQUFHLENBQUM7SUFFaEQsV0FBVztRQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQTtJQUNoRCxDQUFDO0lBRUQsV0FBVztRQUNWLE9BQU8sSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBQzFCLENBQUM7SUFFUyxXQUFXO1FBQ3BCLE1BQU0sRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQTtRQUU5QyxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQ3hCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFO1lBQzNELDRFQUE0RTtZQUM1RSxNQUFNLGlCQUFpQixHQUFHLElBQUkseUJBQXlCLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxXQUFXLElBQUksTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFBO1lBQ25ILE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDLHlCQUF5QixFQUFFLENBQUMsQ0FBQTtZQUNuSCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUVyQixPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFBO1FBQ3JCLENBQUMsQ0FBQyxDQUNGLENBQUE7SUFDRixDQUFDO0NBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2aSB9IGZyb20gJ3ZpdGVzdCdcblxuaW1wb3J0IHsgVml0ZXN0U3B5RnVuY3Rpb25TdHJhdGVneSB9IGZyb20gJyNzcmMvdml0ZXN0LXNweS92aXRlc3Qtc3B5LWZ1bmN0aW9uLXN0cmF0ZWd5J1xuaW1wb3J0IHsgdHlwZSBNb2NrZXJTdHJhdGVneSB9IGZyb20gJyNzcmMvbW9ja2VyL21vY2tlci1zdHJhdGVneSdcbmltcG9ydCB7IHR5cGUgQW55Q29udHJhY3QgfSBmcm9tICcjc3JjL3R5cGVzL2luZGV4J1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IHR5cGUgTW9ja2VyVml0ZXN0T2JqZWN0UmVzdWx0ID0gUmVjb3JkPHN0cmluZywgdmkuU3BpZWQ8YW55Pj5cblxuZXhwb3J0IGNsYXNzIE1vY2tlclZpdGVzdE9iamVjdFN0cmF0ZWd5IGltcGxlbWVudHMgTW9ja2VyU3RyYXRlZ3k8TW9ja2VyVml0ZXN0T2JqZWN0UmVzdWx0PiB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5cdHByb3RlY3RlZCBfc3BpZXM6IHZpLlNwaWVkPGFueT5bXSA9IFtdXG5cblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIF9jb250cmFjdDogQW55Q29udHJhY3QpIHt9XG5cblx0bW9ja1Jlc3RvcmUoKTogdm9pZCB7XG5cdFx0dGhpcy5fc3BpZXMuZm9yRWFjaCgoc3B5KSA9PiBzcHkubW9ja1Jlc3RvcmUoKSlcblx0fVxuXG5cdGNvbnRyYWN0U3B5KCk6IE1vY2tlclZpdGVzdE9iamVjdFJlc3VsdCB7XG5cdFx0cmV0dXJuIHRoaXMuX21vY2tPYmplY3QoKVxuXHR9XG5cblx0cHJvdGVjdGVkIF9tb2NrT2JqZWN0KCk6IE1vY2tlclZpdGVzdE9iamVjdFJlc3VsdCB7XG5cdFx0Y29uc3QgeyBtb2R1bGUsIHN1YmplY3ROYW1lIH0gPSB0aGlzLl9jb250cmFjdFxuXG5cdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcblx0XHRcdE9iamVjdC5lbnRyaWVzKHRoaXMuX2NvbnRyYWN0LmZucykubWFwKChbZm5OYW1lLCBjdEZ1bmNdKSA9PiB7XG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVzdHJpY3QtdGVtcGxhdGUtZXhwcmVzc2lvbnNcblx0XHRcdFx0Y29uc3Qgdml0ZXN0U3B5RnVuY3Rpb24gPSBuZXcgVml0ZXN0U3B5RnVuY3Rpb25TdHJhdGVneSh7IG5hbWU6IGAke3N1YmplY3ROYW1lfS4ke2ZuTmFtZX1gLCB0ZXJtczogY3RGdW5jIS50ZXJtcyB9KVxuXHRcdFx0XHRjb25zdCBzcHkgPSB2aS5zcHlPbihtb2R1bGVbc3ViamVjdE5hbWVdLCBmbk5hbWUpLm1vY2tJbXBsZW1lbnRhdGlvbih2aXRlc3RTcHlGdW5jdGlvbi5tb2NrSW1wbGVtZW50YXRpb25GYWN0b3J5KCkpXG5cdFx0XHRcdHRoaXMuX3NwaWVzLnB1c2goc3B5KVxuXG5cdFx0XHRcdHJldHVybiBbZm5OYW1lLCBzcHldXG5cdFx0XHR9KVxuXHRcdClcblx0fVxufVxuIl19