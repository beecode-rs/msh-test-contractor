import { describe } from '@jest/globals';
import { glob } from 'glob';
import path from 'path';
import { contractor } from '../contract/contractor.js';
export const contractorTestRunner = {
    _file: async (fileLocation) => {
        const modulePath = path.join(process.cwd(), fileLocation);
        // console.log('contractorTestRunner.dir params:', { fileLocation, modulePath, cwd: process.cwd(), __dirname }) // eslint-disable-line no-console
        const contract = await import(modulePath);
        contractorTestRunner.contract(contract.default);
    },
    contract: (contract) => {
        describe(contract.subjectName, () => {
            Object.keys(contract.fns).forEach((fnName) => {
                contractor(contract, fnName);
            });
        });
    },
    dir: async (dirLocation) => {
        describe(dirLocation, () => {
            Promise.all(glob.sync(`${dirLocation}/**/*.contract.ts`).map(contractorTestRunner._file));
        });
    },
    file: (fileLocation) => {
        describe(fileLocation, async () => {
            await contractorTestRunner._file(fileLocation);
        });
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJhY3Rvci10ZXN0LXJ1bm5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cmFjdC9jb250cmFjdG9yLXRlc3QtcnVubmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDeEMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLE1BQU0sQ0FBQTtBQUMzQixPQUFPLElBQUksTUFBTSxNQUFNLENBQUE7QUFFdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBR3JELE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUFHO0lBQ25DLEtBQUssRUFBRSxLQUFLLEVBQUUsWUFBb0IsRUFBaUIsRUFBRTtRQUNwRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQTtRQUN6RCxpSkFBaUo7UUFDakosTUFBTSxRQUFRLEdBQUcsTUFBTSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDekMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFjLENBQUMsQ0FBQTtJQUN2RCxDQUFDO0lBQ0QsUUFBUSxFQUFFLENBQUMsUUFBcUIsRUFBUSxFQUFFO1FBQ3pDLFFBQVEsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtZQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFjLEVBQUUsRUFBRTtnQkFDcEQsVUFBVSxDQUFDLFFBQWUsRUFBRSxNQUFNLENBQUMsQ0FBQTtZQUNwQyxDQUFDLENBQUMsQ0FBQTtRQUNILENBQUMsQ0FBQyxDQUFBO0lBQ0gsQ0FBQztJQUNELEdBQUcsRUFBRSxLQUFLLEVBQUUsV0FBbUIsRUFBaUIsRUFBRTtRQUNqRCxRQUFRLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtZQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLG1CQUFtQixDQUFDLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7UUFDMUYsQ0FBQyxDQUFDLENBQUE7SUFDSCxDQUFDO0lBQ0QsSUFBSSxFQUFFLENBQUMsWUFBb0IsRUFBUSxFQUFFO1FBQ3BDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDakMsTUFBTSxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDL0MsQ0FBQyxDQUFDLENBQUE7SUFDSCxDQUFDO0NBQ0QsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlIH0gZnJvbSAnQGplc3QvZ2xvYmFscydcbmltcG9ydCB7IGdsb2IgfSBmcm9tICdnbG9iJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcblxuaW1wb3J0IHsgY29udHJhY3RvciB9IGZyb20gJyNzcmMvY29udHJhY3QvY29udHJhY3RvcidcbmltcG9ydCB7IEFueUNvbnRyYWN0IH0gZnJvbSAnI3NyYy90eXBlcydcblxuZXhwb3J0IGNvbnN0IGNvbnRyYWN0b3JUZXN0UnVubmVyID0ge1xuXHRfZmlsZTogYXN5bmMgKGZpbGVMb2NhdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XG5cdFx0Y29uc3QgbW9kdWxlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBmaWxlTG9jYXRpb24pXG5cdFx0Ly8gY29uc29sZS5sb2coJ2NvbnRyYWN0b3JUZXN0UnVubmVyLmRpciBwYXJhbXM6JywgeyBmaWxlTG9jYXRpb24sIG1vZHVsZVBhdGgsIGN3ZDogcHJvY2Vzcy5jd2QoKSwgX19kaXJuYW1lIH0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuXHRcdGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgaW1wb3J0KG1vZHVsZVBhdGgpXG5cdFx0Y29udHJhY3RvclRlc3RSdW5uZXIuY29udHJhY3QoY29udHJhY3QuZGVmYXVsdCBhcyBhbnkpXG5cdH0sXG5cdGNvbnRyYWN0OiAoY29udHJhY3Q6IEFueUNvbnRyYWN0KTogdm9pZCA9PiB7XG5cdFx0ZGVzY3JpYmUoY29udHJhY3Quc3ViamVjdE5hbWUsICgpID0+IHtcblx0XHRcdE9iamVjdC5rZXlzKGNvbnRyYWN0LmZucykuZm9yRWFjaCgoZm5OYW1lOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0Y29udHJhY3Rvcihjb250cmFjdCBhcyBhbnksIGZuTmFtZSlcblx0XHRcdH0pXG5cdFx0fSlcblx0fSxcblx0ZGlyOiBhc3luYyAoZGlyTG9jYXRpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuXHRcdGRlc2NyaWJlKGRpckxvY2F0aW9uLCAoKSA9PiB7XG5cdFx0XHRQcm9taXNlLmFsbChnbG9iLnN5bmMoYCR7ZGlyTG9jYXRpb259LyoqLyouY29udHJhY3QudHNgKS5tYXAoY29udHJhY3RvclRlc3RSdW5uZXIuX2ZpbGUpKVxuXHRcdH0pXG5cdH0sXG5cdGZpbGU6IChmaWxlTG9jYXRpb246IHN0cmluZyk6IHZvaWQgPT4ge1xuXHRcdGRlc2NyaWJlKGZpbGVMb2NhdGlvbiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgY29udHJhY3RvclRlc3RSdW5uZXIuX2ZpbGUoZmlsZUxvY2F0aW9uKVxuXHRcdH0pXG5cdH0sXG59XG4iXX0=