import { vi } from 'vitest';
import { objectUtil } from '#src/util/object-util';
export class JestSpyFunctionStrategy {
    _terms;
    _name;
    constructor(params) {
        const { terms, name } = params;
        this._terms = terms;
        this._name = name;
    }
    mockImplementationFactory() {
        const fakeImplementation = (...mockParams) => {
            const foundTerm = this._terms.find((term) => objectUtil.stringifyOrNullUndefined(term.params) === objectUtil.stringifyOrNullUndefined(mockParams));
            if (!foundTerm) {
                throw new Error(`Unknown contract ${this._name} for params ${JSON.stringify(mockParams)}`);
            }
            return foundTerm.result;
        };
        return vi.fn().mockImplementation(fakeImplementation);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamVzdC1zcHktZnVuY3Rpb24tc3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvamVzdC1zcHkvamVzdC1zcHktZnVuY3Rpb24tc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFRLEVBQUUsRUFBRSxNQUFNLFFBQVEsQ0FBQTtBQUlqQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUE7QUFFbEQsTUFBTSxPQUFPLHVCQUF1QjtJQUNoQixNQUFNLENBQWdCO0lBQ3RCLEtBQUssQ0FBUTtJQUVoQyxZQUFZLE1BQStDO1FBQzFELE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxDQUFBO1FBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFBO1FBQ25CLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFBO0lBQ2xCLENBQUM7SUFFRCx5QkFBeUI7UUFDeEIsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLEdBQUcsVUFBaUIsRUFBTyxFQUFFO1lBQ3hELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNqQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxVQUFVLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLENBQzlHLENBQUE7WUFDRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ2hCLE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLElBQUksQ0FBQyxLQUFLLGVBQWUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDM0YsQ0FBQztZQUVELE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQTtRQUN4QixDQUFDLENBQUE7UUFFRCxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO0lBQ3RELENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vY2ssIHZpIH0gZnJvbSAndml0ZXN0J1xuXG5pbXBvcnQgeyBKZXN0U3B5U3RyYXRlZ3kgfSBmcm9tICcjc3JjL2plc3Qtc3B5L2plc3Qtc3B5LXN0cmF0ZWd5J1xuaW1wb3J0IHsgQ29udHJhY3RUZXJtIH0gZnJvbSAnI3NyYy90eXBlcydcbmltcG9ydCB7IG9iamVjdFV0aWwgfSBmcm9tICcjc3JjL3V0aWwvb2JqZWN0LXV0aWwnXG5cbmV4cG9ydCBjbGFzcyBKZXN0U3B5RnVuY3Rpb25TdHJhdGVneSBpbXBsZW1lbnRzIEplc3RTcHlTdHJhdGVneSB7XG5cdHByb3RlY3RlZCByZWFkb25seSBfdGVybXM6IENvbnRyYWN0VGVybVtdXG5cdHByb3RlY3RlZCByZWFkb25seSBfbmFtZTogc3RyaW5nXG5cblx0Y29uc3RydWN0b3IocGFyYW1zOiB7IHRlcm1zOiBDb250cmFjdFRlcm1bXTsgbmFtZTogc3RyaW5nIH0pIHtcblx0XHRjb25zdCB7IHRlcm1zLCBuYW1lIH0gPSBwYXJhbXNcblx0XHR0aGlzLl90ZXJtcyA9IHRlcm1zXG5cdFx0dGhpcy5fbmFtZSA9IG5hbWVcblx0fVxuXG5cdG1vY2tJbXBsZW1lbnRhdGlvbkZhY3RvcnkoKTogTW9jayB7XG5cdFx0Y29uc3QgZmFrZUltcGxlbWVudGF0aW9uID0gKC4uLm1vY2tQYXJhbXM6IGFueVtdKTogYW55ID0+IHtcblx0XHRcdGNvbnN0IGZvdW5kVGVybSA9IHRoaXMuX3Rlcm1zLmZpbmQoXG5cdFx0XHRcdCh0ZXJtKSA9PiBvYmplY3RVdGlsLnN0cmluZ2lmeU9yTnVsbFVuZGVmaW5lZCh0ZXJtLnBhcmFtcykgPT09IG9iamVjdFV0aWwuc3RyaW5naWZ5T3JOdWxsVW5kZWZpbmVkKG1vY2tQYXJhbXMpXG5cdFx0XHQpXG5cdFx0XHRpZiAoIWZvdW5kVGVybSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29udHJhY3QgJHt0aGlzLl9uYW1lfSBmb3IgcGFyYW1zICR7SlNPTi5zdHJpbmdpZnkobW9ja1BhcmFtcyl9YClcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZvdW5kVGVybS5yZXN1bHRcblx0XHR9XG5cblx0XHRyZXR1cm4gdmkuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oZmFrZUltcGxlbWVudGF0aW9uKVxuXHR9XG59XG4iXX0=