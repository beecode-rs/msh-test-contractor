import { SpecialFnName } from '#src/enum/special-fn-name';
import { MockerVitestClassStrategy } from '#src/mocker/mocker-vitest-class-strategy';
import { MockerVitestFunctionStrategy } from '#src/mocker/mocker-vitest-function-strategy';
import { MockerVitestObjectStrategy } from '#src/mocker/mocker-vitest-object-strategy';
import { typeUtil } from '#src/util/type-util';
export const mockerService = {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    strategyFromContract: (contract) => {
        const { module, subjectName, fns } = contract;
        const subject = module[subjectName];
        const { [SpecialFnName.SELF]: selfFunction } = fns;
        if (typeUtil.isFunction(subject) && selfFunction) {
            return new MockerVitestFunctionStrategy(contract);
        }
        if (typeUtil.isClass(subject)) {
            return new MockerVitestClassStrategy(contract);
        }
        if (typeUtil.isObject(subject)) {
            return new MockerVitestObjectStrategy(contract);
        }
        throw new Error('Unknown mocker');
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9ja2VyLXNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9ja2VyL21vY2tlci1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQTtBQUN6RCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUNwRixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQTtBQUMxRixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQTtBQUd0RixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFFOUMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHO0lBQzVCLDhEQUE4RDtJQUM5RCxvQkFBb0IsRUFBRSxDQUFDLFFBQXFCLEVBQXVCLEVBQUU7UUFDcEUsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsUUFBUSxDQUFBO1FBQzdDLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNuQyxNQUFNLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsWUFBWSxFQUFFLEdBQUcsR0FBRyxDQUFBO1FBQ2xELElBQUksUUFBUSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQUNsRCxPQUFPLElBQUksNEJBQTRCLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDbEQsQ0FBQztRQUNELElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQy9CLE9BQU8sSUFBSSx5QkFBeUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUMvQyxDQUFDO1FBQ0QsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDaEMsT0FBTyxJQUFJLDBCQUEwQixDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2hELENBQUM7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUE7SUFDbEMsQ0FBQztDQUNELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTcGVjaWFsRm5OYW1lIH0gZnJvbSAnI3NyYy9lbnVtL3NwZWNpYWwtZm4tbmFtZSdcbmltcG9ydCB7IE1vY2tlclZpdGVzdENsYXNzU3RyYXRlZ3kgfSBmcm9tICcjc3JjL21vY2tlci9tb2NrZXItdml0ZXN0LWNsYXNzLXN0cmF0ZWd5J1xuaW1wb3J0IHsgTW9ja2VyVml0ZXN0RnVuY3Rpb25TdHJhdGVneSB9IGZyb20gJyNzcmMvbW9ja2VyL21vY2tlci12aXRlc3QtZnVuY3Rpb24tc3RyYXRlZ3knXG5pbXBvcnQgeyBNb2NrZXJWaXRlc3RPYmplY3RTdHJhdGVneSB9IGZyb20gJyNzcmMvbW9ja2VyL21vY2tlci12aXRlc3Qtb2JqZWN0LXN0cmF0ZWd5J1xuaW1wb3J0IHsgdHlwZSBNb2NrZXJTdHJhdGVneSB9IGZyb20gJyNzcmMvbW9ja2VyL21vY2tlci1zdHJhdGVneSdcbmltcG9ydCB7IHR5cGUgQW55Q29udHJhY3QgfSBmcm9tICcjc3JjL3R5cGVzL2luZGV4J1xuaW1wb3J0IHsgdHlwZVV0aWwgfSBmcm9tICcjc3JjL3V0aWwvdHlwZS11dGlsJ1xuXG5leHBvcnQgY29uc3QgbW9ja2VyU2VydmljZSA9IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblx0c3RyYXRlZ3lGcm9tQ29udHJhY3Q6IChjb250cmFjdDogQW55Q29udHJhY3QpOiBNb2NrZXJTdHJhdGVneTxhbnk+ID0+IHtcblx0XHRjb25zdCB7IG1vZHVsZSwgc3ViamVjdE5hbWUsIGZucyB9ID0gY29udHJhY3Rcblx0XHRjb25zdCBzdWJqZWN0ID0gbW9kdWxlW3N1YmplY3ROYW1lXVxuXHRcdGNvbnN0IHsgW1NwZWNpYWxGbk5hbWUuU0VMRl06IHNlbGZGdW5jdGlvbiB9ID0gZm5zXG5cdFx0aWYgKHR5cGVVdGlsLmlzRnVuY3Rpb24oc3ViamVjdCkgJiYgc2VsZkZ1bmN0aW9uKSB7XG5cdFx0XHRyZXR1cm4gbmV3IE1vY2tlclZpdGVzdEZ1bmN0aW9uU3RyYXRlZ3koY29udHJhY3QpXG5cdFx0fVxuXHRcdGlmICh0eXBlVXRpbC5pc0NsYXNzKHN1YmplY3QpKSB7XG5cdFx0XHRyZXR1cm4gbmV3IE1vY2tlclZpdGVzdENsYXNzU3RyYXRlZ3koY29udHJhY3QpXG5cdFx0fVxuXHRcdGlmICh0eXBlVXRpbC5pc09iamVjdChzdWJqZWN0KSkge1xuXHRcdFx0cmV0dXJuIG5ldyBNb2NrZXJWaXRlc3RPYmplY3RTdHJhdGVneShjb250cmFjdClcblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1vY2tlcicpXG5cdH0sXG59XG4iXX0=