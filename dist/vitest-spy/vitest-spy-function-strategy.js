import { vi } from 'vitest';
import { objectUtil } from '#src/util/object-util';
export class VitestSpyFunctionStrategy {
    _terms;
    _name;
    constructor(params) {
        const { terms, name } = params;
        this._terms = terms;
        this._name = name;
    }
    mockImplementationFactory() {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        const fakeImplementation = (...mockParams) => {
            const foundTerm = this._terms.find((term) => objectUtil.stringifyOrNullUndefined(term.params) === objectUtil.stringifyOrNullUndefined(mockParams));
            if (!foundTerm) {
                throw new Error(`Unknown contract ${this._name} for params ${JSON.stringify(mockParams)}`);
            }
            return foundTerm.result;
        };
        return vi.fn().mockImplementation(fakeImplementation);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidml0ZXN0LXNweS1mdW5jdGlvbi1zdHJhdGVneS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92aXRlc3Qtc3B5L3ZpdGVzdC1zcHktZnVuY3Rpb24tc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFhLEVBQUUsRUFBRSxNQUFNLFFBQVEsQ0FBQTtBQUl0QyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUE7QUFFbEQsTUFBTSxPQUFPLHlCQUF5QjtJQUNsQixNQUFNLENBQWdCO0lBQ3RCLEtBQUssQ0FBUTtJQUVoQyxZQUFZLE1BQStDO1FBQzFELE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxDQUFBO1FBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFBO1FBQ25CLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFBO0lBQ2xCLENBQUM7SUFFRCx5QkFBeUI7UUFDeEIsOERBQThEO1FBQzlELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLFVBQWlCLEVBQU8sRUFBRTtZQUN4RCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDakMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssVUFBVSxDQUFDLHdCQUF3QixDQUFDLFVBQVUsQ0FBQyxDQUM5RyxDQUFBO1lBQ0QsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixJQUFJLENBQUMsS0FBSyxlQUFlLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzNGLENBQUM7WUFFRCxPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUE7UUFDeEIsQ0FBQyxDQUFBO1FBRUQsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0NBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIE1vY2ssIHZpIH0gZnJvbSAndml0ZXN0J1xuXG5pbXBvcnQgeyB0eXBlIFZpdGVzdFNweVN0cmF0ZWd5IH0gZnJvbSAnI3NyYy92aXRlc3Qtc3B5L3ZpdGVzdC1zcHktc3RyYXRlZ3knXG5pbXBvcnQgeyB0eXBlIENvbnRyYWN0VGVybSB9IGZyb20gJyNzcmMvdHlwZXMvaW5kZXgnXG5pbXBvcnQgeyBvYmplY3RVdGlsIH0gZnJvbSAnI3NyYy91dGlsL29iamVjdC11dGlsJ1xuXG5leHBvcnQgY2xhc3MgVml0ZXN0U3B5RnVuY3Rpb25TdHJhdGVneSBpbXBsZW1lbnRzIFZpdGVzdFNweVN0cmF0ZWd5IHtcblx0cHJvdGVjdGVkIHJlYWRvbmx5IF90ZXJtczogQ29udHJhY3RUZXJtW11cblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9uYW1lOiBzdHJpbmdcblxuXHRjb25zdHJ1Y3RvcihwYXJhbXM6IHsgdGVybXM6IENvbnRyYWN0VGVybVtdOyBuYW1lOiBzdHJpbmcgfSkge1xuXHRcdGNvbnN0IHsgdGVybXMsIG5hbWUgfSA9IHBhcmFtc1xuXHRcdHRoaXMuX3Rlcm1zID0gdGVybXNcblx0XHR0aGlzLl9uYW1lID0gbmFtZVxuXHR9XG5cblx0bW9ja0ltcGxlbWVudGF0aW9uRmFjdG9yeSgpOiBNb2NrIHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXHRcdGNvbnN0IGZha2VJbXBsZW1lbnRhdGlvbiA9ICguLi5tb2NrUGFyYW1zOiBhbnlbXSk6IGFueSA9PiB7XG5cdFx0XHRjb25zdCBmb3VuZFRlcm0gPSB0aGlzLl90ZXJtcy5maW5kKFxuXHRcdFx0XHQodGVybSkgPT4gb2JqZWN0VXRpbC5zdHJpbmdpZnlPck51bGxVbmRlZmluZWQodGVybS5wYXJhbXMpID09PSBvYmplY3RVdGlsLnN0cmluZ2lmeU9yTnVsbFVuZGVmaW5lZChtb2NrUGFyYW1zKVxuXHRcdFx0KVxuXHRcdFx0aWYgKCFmb3VuZFRlcm0pIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNvbnRyYWN0ICR7dGhpcy5fbmFtZX0gZm9yIHBhcmFtcyAke0pTT04uc3RyaW5naWZ5KG1vY2tQYXJhbXMpfWApXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmb3VuZFRlcm0ucmVzdWx0XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZpLmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKGZha2VJbXBsZW1lbnRhdGlvbilcblx0fVxufVxuIl19